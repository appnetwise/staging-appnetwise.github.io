{"componentChunkName":"component---src-pages-blog-blog-details-js","path":"/blog/elk-in-kubernetes-production/","result":{"data":{"bloggerPost":{"slug":"elk-in-kubernetes-production","id":"f161eb0d-b2bf-57a8-849c-43fff898bcb8","title":"ELK in Kubernetes Production","content":"<p><span style=\"font-family: Nunito; font-size: medium;\">&nbsp;</span></p><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrsM_DFua4xzzdcSJem9gaWzFDaU5MPJIFL-m2f2gai1A9iGHRloudQx9MWRbwwVuQbii2VMdFd4TtePa8l-8yhCb1ieu5HTpP2bmqRcQntQQKOhh1hKL_bG8CWWsvbcc1NzxCRnHvSSZP1lClm5eflHsoGCh6KcspgDO3pA5pFITbQjFBnEvp8_eT/s655/1_OKcxK2H9fUn6nUEnGnX5qA.webp\" style=\"margin-left: 1em; margin-right: 1em;\"><span style=\"color: black; font-family: Nunito; font-size: medium;\"><img border=\"0\" data-original-height=\"357\" data-original-width=\"655\" height=\"348\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEjrsM_DFua4xzzdcSJem9gaWzFDaU5MPJIFL-m2f2gai1A9iGHRloudQx9MWRbwwVuQbii2VMdFd4TtePa8l-8yhCb1ieu5HTpP2bmqRcQntQQKOhh1hKL_bG8CWWsvbcc1NzxCRnHvSSZP1lClm5eflHsoGCh6KcspgDO3pA5pFITbQjFBnEvp8_eT/w640-h348/1_OKcxK2H9fUn6nUEnGnX5qA.webp\" width=\"640\" /></span></a></div><div class=\"separator\" style=\"clear: both; text-align: center;\"><span style=\"font-family: Nunito; font-size: medium;\"><br /></span></div><div class=\"separator\" style=\"clear: both; text-align: center;\"><h3 style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: left;\"><span class=\"al\" style=\"box-sizing: inherit; font-family: Nunito; font-size: medium; font-weight: inherit;\">Introduction</span></h3></div><div class=\"separator\" style=\"clear: both; text-align: center;\"><div style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: left; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Are you looking to harness the power of Elasticsearch for storing and searching through large volumes of textual data, coupled with the visualization capabilities of Kibana? Look no further than Kubernetes, the leading container orchestrator. In this guide, we’ll walk you through the process of deploying Elasticsearch and Kibana on Kubernetes, leveraging best practices and industry-standard tools like Helm.</span></div><h4 style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Understanding Elasticsearch and Kubernetes</span></h4><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"3146\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Elasticsearch is a distributed, scalable search engine designed to handle large volumes of data efficiently. It’s perfect for scenarios like log aggregation, metrics analysis, and full-text search. On the other hand, Kubernetes is a container orchestrator that simplifies the deployment and management of containerized applications, providing scalability and resilience.</span></p><h3 style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Why Deploy Elasticsearch on Kubernetes?</span></h3><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"a07a\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Running Elasticsearch on Kubernetes offers several advantages. Kubernetes provides easy scalability, simplified management, and consistent deployment across different environments. By leveraging Kubernetes features like StatefulSets and PersistentVolumes, you can ensure data persistence and high availability for your Elasticsearch cluster.</span></p><h1 class=\"ms mt gr bc mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np bh\" data-selectable-paragraph=\"\" id=\"6a87\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: start;\"><span style=\"font-family: Nunito; font-size: medium;\">Elasticsearch Cluster Architecture:</span></h1><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"ce33\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">The Elasticsearch cluster comprises three types of nodes:</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"b01e\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">⦁&nbsp;<span class=\"ns gs\" style=\"box-sizing: inherit; font-weight: 700;\">Master nodes:</span>&nbsp;Handle cluster-wide management and configuration.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"f664\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">⦁&nbsp;<span class=\"ns gs\" style=\"box-sizing: inherit; font-weight: 700;\">Data nodes:</span>&nbsp;Responsible for storing data and executing data-related operations like searches.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"0474\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">⦁<span class=\"ns gs\" style=\"box-sizing: inherit; font-weight: 700;\">&nbsp;Client nodes:&nbsp;</span>Route cluster requests to the master node and handle data-related requests to data nodes.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"b341\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">The recommended practice is to deploy a total of 7 pods in the Elasticsearch cluster: 3 Master node pods, 2 Data node pods, and 2 Client node pods. The diagram below illustrates the cluster architecture with these pods.</span></p><div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiVyK3dPn3TwwittcVSLV11CwFqJhsH1is6_5hkem2OjrtXqdKMf6aimqvIyNHhVEU8lx2k2NgT3Y_Iyo0raoc7XacrLTXpTJJgwi8eKR3v9CZCDAALYTQHxgZb1hS3Bvh27HBIqt_M-18s-TVlXvHegJam5K9l15ZDkKz2I0IFK6npnrofHvynxQ77/s862/1_44GPCl8YkaDDimuc7st4xA.webp\" style=\"margin-left: 1em; margin-right: 1em;\"><span style=\"color: black; font-family: Nunito; font-size: medium;\"><img border=\"0\" data-original-height=\"862\" data-original-width=\"565\" height=\"640\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEiVyK3dPn3TwwittcVSLV11CwFqJhsH1is6_5hkem2OjrtXqdKMf6aimqvIyNHhVEU8lx2k2NgT3Y_Iyo0raoc7XacrLTXpTJJgwi8eKR3v9CZCDAALYTQHxgZb1hS3Bvh27HBIqt_M-18s-TVlXvHegJam5K9l15ZDkKz2I0IFK6npnrofHvynxQ77/w420-h640/1_44GPCl8YkaDDimuc7st4xA.webp\" width=\"420\" /></span></a></div><p></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"e39f\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Data node pods are deployed as a StatefulSet with a headless service  toe stable network identities. Master node pods are deployed as a ReplicaSet with a headless service, facilitating auto-discovery. Client node pods are also deployed as a ReplicaSet, but with an internal service that allows access to the Data nodes for read/write requests.</span></p><h3 style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Memory Requirements for Deploying Elasticsearch on Kubernetes</span></h3><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"0b0a\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">When deploying Elasticsearch on Kubernetes, remember to allocate at least 4GB of memory to each Kubernetes node. To run smoothly, you’ll need a minimum of 7 nodes. The default size for PersistentVolumeClaims (PVCs) in each Elasticsearch Pod is 30GB, determining your block storage needs. Since pods are managed within a StatefulSet, ensure you have 30GB of storage available for each additional pod you create. Dealing with PVCs can be complex, especially outside of cloud services, as manual deletion may be required. Issues like pod startup failures often result from insufficient storage or lingering old PVCs.</span></p><h1 class=\"ms mt gr bc mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np bh\" data-selectable-paragraph=\"\" id=\"9323\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em; text-align: start;\"><span style=\"font-family: Nunito; font-size: medium;\">Deploying a 7-Pod Elasticsearch Cluster on Kubernetes with Helm</span></h1><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"d8ff\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">To configure a robust Elasticsearch cluster, we follow best practices to set up 7 Pods: 3 master Pods, 2 data Pods, and 2 client Pods. This setup ensures optimal performance and reliability.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"f0ac\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; text-align: start; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Start by running the Helm install command without any additional parameters:</span></p></div><span style=\"font-family: Nunito; font-size: medium;\"><br />\n\n\n\n</span><pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">helm install --name elasticsearch elastic/elasticsearch</span></pre><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"8d85\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Next, upgrade the Elasticsearch Pods to increase their number and assign specific roles. Create three YAML configuration files for this purpose:</span></p><h2 style=\"text-align: left;\"><b><span style=\"font-family: Nunito; font-size: medium;\">&nbsp;Master Pods Configuration:</span></b></h2>\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">\n# master.yaml\n---\nclusterName: \"elasticsearch\"\nnodeGroup: \"master\"\nroles:\n  master: \"true\"\n  ingest: \"false\"\n  data: \"false\"\nreplicas: 3</span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Data Pods Configuration:</span></h2>\n\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">\n# data.yaml\n--\nclusterName: \"elasticsearch\"\nnodeGroup: \"data\"\nroles:\n  master: \"false\"\n  ingest: \"true\"\n  data: \"true\"\nreplicas: 2</span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Clients Pods Configuration: </span></h2>\n\n\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">\n# client.yaml\n---\nclusterName: \"elasticsearch\"\nnodeGroup: \"client\"\nroles:\n  master: \"false\"\n  ingest: \"false\"\n  data: \"false\"\nreplicas: 2\nservice:\n  type: \"LoadBalancer\"</span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\">Execute the upgrade command three times, using each YAML config file: </span></h2>\n\n\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">\nRhelm upgrade --wait --timeout=600 --install \\\n  --values ./master.yaml elasticsearch elastic/elasticsearch\n\nhelm upgrade --wait --timeout=600 --install \\\n  --values ./data.yaml elasticsearch elastic/elasticsearch\n\nhelm upgrade --wait --timeout=600 --install \\\n  --values ./client.yaml elasticsearch elastic/elasticsearch</span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\"><b>The upgrade process might take a while. Once completed, verify the status of your resources: </b></span></h2>\n\n\n\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">kubectl get all</span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\"><b>You should see output similar to this: </b></span></h2>\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\"># Pods\nNAME                          READY   STATUS    RESTARTS   AGE\npod/elasticsearch-client-0    1/1     Running   0          10m\npod/elasticsearch-client-1    1/1     Running   0          10m\npod/elasticsearch-data-0      1/1     Running   0          11m\npod/elasticsearch-data-1      1/1     Running   0          11m\npod/elasticsearch-master-0    1/1     Running   0          8m27s\npod/elasticsearch-master-1    1/1     Running   0          8m27s\npod/elasticsearch-master-2    1/1     Running   0          8m27s\n\n# Services\nNAME                                    TYPE           CLUSTER-IP       EXTERNAL-IP     PORT(S)                         AGE\nservice/elasticsearch-client            LoadBalancer   10.245.114.89    &lt;YOUR_IP&gt;<your_ip>       9200:32366/TCP,9300:31427/TCP   10m\nservice/elasticsearch-client-headless   ClusterIP      None             <none> &lt;NONE&gt;         9200/TCP,9300/TCP               10m\nservice/elasticsearch-data              ClusterIP      10.245.116.115   <none> &lt;NONE&gt;         9200/TCP,9300/TCP               11m\nservice/elasticsearch-data-headless     ClusterIP      None             <none> &lt;NONE&gt;         9200/TCP,9300/TCP               11m\nservice/elasticsearch-master            ClusterIP      10.245.220.94    <none> &lt;NONE&gt;         9200/TCP,9300/TCP               8m27s\nservice/elasticsearch-master-headless   ClusterIP      None             <none> &lt;NONE&gt;         9200/TCP,9300/TCP               8m27s\nservice/kubernetes                      ClusterIP      10.245.0.1       <none> &lt;NONE&gt;         443/TCP                         4h5m\n\n# StatefulSets\nNAME                             READY   AGE\nstatefulset.apps/elasticsearch-client   2/2     10m\nstatefulset.apps/elasticsearch-data     2/2     11m\nstatefulset.apps/elasticsearch-master   3/3     8m28s\n </none></none></none></none></none></none></your_ip></span></pre><h2 style=\"text-align: left;\"><span style=\"font-family: Nunito; font-size: medium;\"><b>To ensure everything is working, use curl to check the Elasticsearch endpoint: </b></span></h2>\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">curl http://&lt;YOUR_IP&gt;<your_ip>/_cluster/state?pretty</your_ip></span></pre><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"8f22\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Your cluster should now be ready to handle production workloads efficiently. If you encounter issues with larger clusters, consider configuring readiness probes to verify that your Elasticsearch Pods are ready to accept traffic.</span></p><h1 class=\"ms mt gr bc mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm nn no np bh\" data-selectable-paragraph=\"\" id=\"bb0a\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.016em; line-height: 30px; margin: 1.95em 0px -0.28em;\"><span style=\"font-family: Nunito; font-size: medium;\">How to Deploy Kibana on Kubernetes:</span></h1><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"49fa\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Deploying Kibana on Kubernetes allows you to visualize and manage your Elasticsearch data easily. Follow these steps to get Kibana up and running on your Kubernetes cluster.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"ff65\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span class=\"ns gs\" style=\"box-sizing: inherit; font-family: Nunito; font-size: medium; font-weight: 700;\">Prerequisites</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"f3f9\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">A running Elasticsearch cluster on Kubernetes.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"ab15\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Helm installed and configured.</span></p><h2 class=\"pi mt gr bc mu pj pk dv my pl pm dx nc ob pn po pp of pq pr ps oj pt pu pv pw bh\" data-selectable-paragraph=\"\" id=\"1755\" style=\"background-color: white; box-sizing: inherit; line-height: 24px; margin: 1.72em 0px -0.31em;\"><span style=\"font-family: Nunito; font-size: medium;\">Steps to Deploy Kibana</span></h2><h2 class=\"pi mt gr bc mu pj pk dv my pl pm dx nc ob pn po pp of pq pr ps oj pt pu pv pw bh\" data-selectable-paragraph=\"\" id=\"0f40\" style=\"background-color: white; box-sizing: inherit; line-height: 24px; margin: 1.72em 0px -0.31em;\"><span style=\"font-family: Nunito; font-size: medium;\">Add the Helm Chart for Kibana:</span></h2><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"711f\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Use the official Helm chart to install Kibana. Run the following command, making sure to replace &lt;CLIENT_SERVICE_NAME&gt; with the name of your Elasticsearch client service. If you followed the 7-Pod Elasticsearch guide, the service name would be elasticsearch-client.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"711f\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\"><br /></span></p>\n  \n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">helm repo add bitnami https://charts.bitnami.com/bitnami\n\nhelm install --name elasticsearch --set \\\nname=elasticsearch,master.replicas=3,coordinating.service.type=LoadBalancer bitnami/elasticsearch</span></pre><h2 class=\"pi mt gr bc mu pj pk dv my pl pm dx nc ob pn po pp of pq pr ps oj pt pu pv pw bh\" data-selectable-paragraph=\"\" id=\"e736\" style=\"background-color: white; box-sizing: inherit; line-height: 24px; margin: 1.72em 0px -0.31em;\"><span style=\"font-family: Nunito; font-size: medium;\">Verify the Deployment:</span></h2><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"6c48\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">After running the Helm command, check to ensure that Kibana is running properly by listing all resources:</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"6c48\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\"><br /></span></p>\n\n\n<pre style=\"background: rgb(238, 238, 238); border-bottom-color: initial; border-bottom-style: initial; border-image: initial; border-left-color: initial; border-left-style: initial; border-radius: 10px; border-right-color: initial; border-right-style: initial; border-top-color: rgb(221, 221, 221); border-top-style: solid; border-width: 5px 0px 0px; font-stretch: inherit; font-variant-east-asian: inherit; font-variant-numeric: inherit; line-height: inherit; margin-bottom: 1.5em; margin-top: 0px; overflow-wrap: normal; overflow: auto; padding: 12px; vertical-align: baseline;\"><span style=\"font-family: Nunito; font-size: medium;\">[Output]\n\nNAME                                                                 READY   STATUS    RESTARTS   AGE\n\npod/elasticsearch-elasticsearch-coordinating-only-694b5f94f8-896k5   1/1     Running   0          3m55s\n\npod/elasticsearch-elasticsearch-coordinating-only-694b5f94f8-jvdrn   1/1     Running   0          3m55s\n\npod/elasticsearch-elasticsearch-data-0                               1/1     Running   0          3m55s\n\npod/elasticsearch-elasticsearch-data-1                               1/1     Running   0          3m27s\n\npod/elasticsearch-elasticsearch-master-0                             1/1     Running   0          3m55s\n\npod/elasticsearch-elasticsearch-master-1                             1/1     Running   0          3m35s\n\npod/elasticsearch-elasticsearch-master-2                             1/1     Running   0          3m16s\n\nNAME                                                    TYPE           CLUSTER-IP      EXTERNAL-IP      PORT(S)             AGE\n\nservice/elasticsearch-elasticsearch-coordinating-only   LoadBalancer   10.245.13.251   <your_ip>&lt;Your_IP&gt;        9200:32270/TCP     3m56s\n\nservice/elasticsearch-elasticsearch-discovery           ClusterIP      None            <none> &lt;none&gt;          9300/TCP           3m56s\n\nservice/elasticsearch-elasticsearch-master              ClusterIP      10.245.0.78     <none> &lt;none&gt;          9300/TCP           3m56s\n\nservice/kubernetes                                      ClusterIP      10.245.0.1      <none> &lt;none&gt;          443/TCP            30m\n\nNAME                                                            READY   UP-TO-DATE   AVAILABLE   AGE\n\ndeployment.apps/elasticsearch-elasticsearch-coordinating-only   2/2     2            2           3m55s\n\nNAME                                                                       DESIRED   CURRENT   READY   AGE\n\nreplicaset.apps/elasticsearch-elasticsearch-coordinating-only-694b5f94f8   2         2         2       3m55s\n\nNAME                                                  READY   AGE\n\nstatefulset.apps/elasticsearch-elasticsearch-data     2/2     3m56s\n\nstatefulset.apps/elasticsearch-elasticsearch-master   3/3     3m56s</none></none></none></your_ip></span></pre><h2 class=\"pi mt gr bc mu pj pk dv my pl pm dx nc ob pn po pp of pq pr ps oj pt pu pv pw bh\" data-selectable-paragraph=\"\" id=\"d048\" style=\"background-color: white; box-sizing: inherit; line-height: 24px; margin: 1.72em 0px -0.31em;\"><span style=\"font-family: Nunito; font-size: medium;\">Access Kibana:</span></h2><h3><p class=\"pw-post-body-paragraph nq nr gr ns b nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on gk bh\" data-selectable-paragraph=\"\" id=\"147d\" style=\"background-color: white; box-sizing: inherit; font-weight: 400; letter-spacing: -0.003em; line-height: 32px; margin: 0.94em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">Open your web browser and navigate to http://&lt; YOUR KIBANA IP&gt;:5601. You should see the Kibana interface, where you can start visualizing your Elasticsearch data.</span></p></h3>\n\n\n\n\n<div class=\"separator\" style=\"clear: both; text-align: center;\"><a href=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhPlpYnVcfdrbCPIg72LTYdy5Y1214nAbRoOUA6h6ODRIUnVX5KPS2rjIz01Pj2z7SRJN4ATaGAdl5F9uc8DX4ub8S_-jHszaM6_PMc6FVD-j9M7Fp0jKiyyG4CFNkQ__mDWYEOToEnhX-T7sK6F0xhXb8Mo7EVp_TDCUjRm-CT9rZHpgjdALh0S_Ni/s791/1_UszH_V42KleCvoOhcOdH-Q%20(1).webp\" style=\"margin-left: 1em; margin-right: 1em;\"><span style=\"color: black; font-family: Nunito; font-size: medium;\"><img border=\"0\" data-original-height=\"373\" data-original-width=\"791\" height=\"302\" src=\"https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhPlpYnVcfdrbCPIg72LTYdy5Y1214nAbRoOUA6h6ODRIUnVX5KPS2rjIz01Pj2z7SRJN4ATaGAdl5F9uc8DX4ub8S_-jHszaM6_PMc6FVD-j9M7Fp0jKiyyG4CFNkQ__mDWYEOToEnhX-T7sK6F0xhXb8Mo7EVp_TDCUjRm-CT9rZHpgjdALh0S_Ni/w640-h302/1_UszH_V42KleCvoOhcOdH-Q%20(1).webp\" width=\"640\" /></span></a></div><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"09f3\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">For more insights and updates, follow me on&nbsp;<a class=\"af qc\" href=\"https://www.linkedin.com/in/saivamsi9594/\" rel=\"noopener ugc nofollow\" style=\"-webkit-tap-highlight-color: transparent; box-sizing: inherit;\" target=\"_blank\">LinkedIn</a>&nbsp;and&nbsp;<a class=\"af qc\" href=\"https://vsai9594.medium.com/\" rel=\"noopener\" style=\"-webkit-tap-highlight-color: transparent; box-sizing: inherit;\">Medium</a>.</span></p><p class=\"pw-post-body-paragraph nq nr gr ns b nt oo nv nw nx op nz oa ob oq od oe of or oh oi oj os ol om on gk bh\" data-selectable-paragraph=\"\" id=\"3731\" style=\"background-color: white; box-sizing: inherit; letter-spacing: -0.003em; line-height: 32px; margin: 2.14em 0px -0.46em; word-break: break-word;\"><span style=\"font-family: Nunito; font-size: medium;\">#Elasticsearch #Kubernetes #Helm #DevOps #DataVisualization #ContainerOrchestration #CloudComputing #Kibana #ClusterManagement #Scalability #Appnetwise #Greenbyte</span></p>","published":"2024-06-25T18:53:00+05:30","author":{"displayName":"Appnetwise"}}},"pageContext":{"slug":"elk-in-kubernetes-production"}},"staticQueryHashes":["3218041179"],"slicesMap":{}}